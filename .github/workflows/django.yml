name: Django CI

on:

  push:

    branches: [ "wk05" ]

    paths:

      - "backend/**" # ทำงานเฉพาะเมื่อแก้ backend

  pull_request:

    branches: [ "wk05" ]

    paths:

      - "backend/**"


jobs:

  build-test:

    runs-on: ubuntu-latest

    defaults:

      run:

        working-directory: ./backend # เข้าไปใน folder backend เสมอ
   steps:

    - uses: actions/checkout@v4


    - name: Set up Python

      uses: actions/setup-python@v5

      with:

        python-version: "3.11"


    - name: Install Dependencies

      run: |

        python -m pip install --upgrade pip

        pip install -r requirements.txt


    - name: Run Tests

      run: |

        python manage.py test